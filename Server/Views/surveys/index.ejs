  <!--COMP229 Web Application Development - Mantis Developers Team
    --Developers's : 
    ---Name: Ricardo Lopez Tuiran           ---Student ID:301167302 
    ---Name: Elias Pena Evertz              ---Student ID: 301166037
    ---Name: Silvana Gjini                  ---Student ID: 301201477
    ---Name: Paul Kamau                     ---Student ID: 301198424
    ---Name: Johan Lema Farinango           ---Student ID: 301216096
    ---Name: Bhupinder Dabb                 ---Student ID: 301187371
    --Web App name: Mega-Survey
    --Description: Users will be able to create surveys, answer the surveys, and owners will be able to edit and/or delete their surveys
  -->

<%- include('../partials/header.ejs'); %>

    <!-- MAIN CONTENT -->
    <div class="container" id="tables">
      <div class="row">
        <div class="col-md-offset-1 col-md-10">
          <br>
          <h3>Surveys List</h3>   
          <br>       
          <a href="/surveys/add" class="btn btn-primary"><i class="fa fa-plus"></i> Add a Survey</a>
          <br>
          <br>
          <div class="row justify-content-center">
            <div class="table-responsive-lg">
              <table class="table table-striped">
              <!-- <table class="table table-bordered table-striped table-hover"> -->
                <thead>
                  <tr>                     
                    
                    <th class="text-center">Survey Name</th>
                    <th class="text-center">Start Date</th>
                    <th class="text-center">End Date</th>                  
                    <% if(!displayName) { %>                 
                    <th class="text-center"></th>
                    <% } %>   
                    <%  if(displayName) { %>                       
                      <th class="text-center">Status</th>
                      <th class="text-center"></th>     
                      <th class="text-center"></th>
                      <th class="text-center"></th>
                      <th class="text-center"></th>
                    <% } %>      
                  </tr>
                  </thead>
                  <tbody>
                  <!-- Template Row -->
                  <% for (let count = 0; count < surveys.length; count++) { %>
                  <tr>
                    <td><%= surveys[count].Name %></td>               
                    <td class="text-center" data-toggle="popover" title="<%= getFormatDate(surveys[count].Start_Date, true) %>"><%= getFormatDate(surveys[count].Start_Date) %></td>
                    <td class="text-center" data-toggle="popover" title="<%= getFormatDate(surveys[count].End_Date, true) %>" ><%= getFormatDate(surveys[count].End_Date) %></td>
                    <% if(displayName) { %>                           
                      <td class="text-center"><%= surveys[count].isActive == true ? "Active" : "Inactive"  %></td>
                    <% } %>     

                    <td class="text-center">
                      <a
                      href="/response/<%=surveys[count]._id %>"
                      id="answerButton"
                      role="button"
                      class="btn btn-success btn-sm edit"
                    >
                    <i class="fa-solid fa-pen-to-square"></i><span class="btn-text"> Answer survey</span>
                    </a>
                    </td>
                    <% if(displayName) { %>                                  
                      <td class="text-center">
                        <a
                        href="/surveys/<%=surveys[count]._id %>"
                        id="editButton"
                        role="button"
                        class="btn btn-primary btn-sm edit"                      
                      >
                        <i class="fa-solid fa-pen-to-square"></i><span class="btn-text"> Edit</span>
                      </a>
                      </td>
    
                      <td class="text-center">
                        <a
                        href="/surveys/delete/<%=surveys[count]._id %>"
                        id="delButton"
                        role="button"
                        class="btn btn-danger btn-sm delete"
                      >
                      <i class="fa-solid fa-trash"></i><span class="btn-text"> Delete</span>
                      </td> 
                      <td class="text-center">
                        <a
                        href="/statistics/<%=surveys[count]._id %>"
                        id="statButton"
                        role="button"
                        class="btn btn-secondary btn-sm statistics"
                      >
                      <i class="fa-solid fa-chart-line"></i><span class="btn-text"> Statistics</span>
                      </td>                   
                    <% } %>
                  </tr>
                  <% } %>
                </tbody>
              </table>
            </div>
          </div>          
        </div>
      </div>
    </div>

<%- include('../partials/footer.ejs'); %>


